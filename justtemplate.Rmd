---
main_topsize: 0.2 #percent coverage of the poster
main_bottomsize: 0.1

column_numbers: 3
columnline_col: "#6F8196"
  

#ESSENTIALS
title: '**Kickstarter project**'
author:
  - name: '**Panema**'
    affil: 1
    main: true
  - name: Daniel Blanco
  - name: Georgia Barry
  - name: Benedicte Kjaerran
  
affiliation:
  - num: 1
    address: Bond University 
    author_textsize: 3em
primary_colour: "#6faef5"
secondary_colour: "white"
accent_colour: "#6F8196"
font_family: "Crimson Text"

main_findings:
  - "Kickstarter projects likeliness of sucess & what make the sucess."

output: 
  posterdown::posterdown_betterport:
    self_contained: false
    pandoc_args: 
    number_sections: false
bibliography: packages.bib
link-citations: true
---


```{r include=FALSE}
library(tidyr)
library(caret)
library(dplyr)
library(lubridate)
library(corrplot)
library("pROC")
library(modelr)
library("ggplot2")
library(RColorBrewer)
library(kableExtra)
library("arm")
library("car")
library("jtools")
library(pls)
library(glmnet)
library(MASS)
library("leaps")
library(caret)
library(kableExtra)
library("gmodels")
library("colorspace")

library(olsrr)
library(stats)
library(stats4)
library(statmod)

library(ggstance)
library(broom)
library("broom.mixed")

library("rmarkdown")
library("knitr")

```



```{r include=FALSE}
kickstarter <- readRDS("/Users/benedicte/Documents/Statistical regression/Group P/statistical-learning/final_clean_kickstarter.rds")

kickstarter$cat_child <- NULL
kickstarter$city <- NULL
kickstarter$blurb <- NULL
kickstarter$country_displayable_name <- NULL 
kickstarter$name <- NULL
kickstarter$deadline<-NULL 
kickstarter$launched_at<-NULL

cntnt_Europe = c("DK","AT", "BE", "CH","DE","ES", "FR", "GB","IE", "IT","LU", "NL","NO","SE")
cntnt_Asia = c("HK","JP","SG")
cntnt_NA = c("US","CA")
cntnt_SA = c("MX")
cntnt_Pacific = c("NZ","NZ")
#cntnt_NAmer =

eurpn <- kickstarter$country %in% cntnt_Europe
asian <- kickstarter$country %in% cntnt_Asia  
na <- kickstarter$country %in% cntnt_NA
sa <- kickstarter$country %in% cntnt_SA
pacific <- kickstarter$country %in% cntnt_Pacific

kickstarter$continent = "ph"
kickstarter$continent <- kickstarter$continent[eurpn] <- "Europe"
kickstarter$continent[asian] <- "Asia"
kickstarter$continent[na] <- "NorthAmerica"
kickstarter$continent[sa] <- "SouthAmerica"
kickstarter$continent[pacific] <- "Pacific"

kickstarter$continent <- as.factor(kickstarter$continent) 
kickstarter$backers_count_log <- log(kickstarter$backers_count+1)
kickstarter$backers_count <- NULL
kickstarter$country <- NULL

```

```{r warning=FALSE, include=FALSE}
confusionStats_df <- function(df,target){ # is as.character needed?
  cm <- confusionMatrix(table(Actual = df[[target]],Predicted = df$ClassPredict))
  return(data.frame(cbind(t(cm$overall),t(cm$byClass))))
}

predictLog <- function(df,log, thresh=0.5, t=T, f=F){
    
  p           <- predict(object = log, newdata = df,
                            type = "response",se.fit=T)
  df$fit      <- p$fit
  df$se.fit   <- p$se.fit
  df$logits   <- predict(object = log, newdata = df)
  df$ClassPredict <- ifelse(df$fit > thresh, t, f)
  return(df)
}
```

```{r warning=FALSE, include=FALSE}
IG_data <- kickstarter
IG_data$pledged <- NULL
IG_data$goal <- NULL
IG_data$pledged_log <-NULL
IG_data$id <- NULL
IG_data$target <- NULL
#IG_data$goal_ratio[IG_data$goal_ratio==0] <- min(IG_data$goal_ratio[IG_data$goal_ratio>0]) *0.9
IG_data$goal_ratio <- IG_data$goal_ratio +1
min(IG_data$goal_ratio)
```

```{r warning=FALSE, include=FALSE}
IG <-glm(goal_ratio ~ + cat_parent+ month+ number_of_days +
     backers_count_log + continent +(staff_pick) * (goal_log),family=inverse.gaussian(link=log), data=IG_data)
```



```{r, include=FALSE}
knitr::opts_chunk$set(echo = FALSE,
                      warning = FALSE,
                      tidy = FALSE,
                      message = FALSE,
                      fig.align = 'center',
                      out.width = "100%")
options(knitr.table.format = "html") 
```

# Introduction

Kickstarter is an online crowdfunding platform that provides an ‘all-or-nothing’ approach to project funding. The primary aim of this report was to provide models that predict the success of a project launched on Kickstarter, predict the amount pledged by backers to a project, and predict the number of projects launched in 2021.

```{r, include=FALSE}
knitr::write_bib(c('posterdown', 'rmarkdown','pagedown'), 'packages.bib')
```

## Objectives

This report aims to analyse data sourced from Kickstarter and provide models that answer the following questions: 

1. What factors are likely to increase the amount of money raised, or pledged, on Kickstarter?  
2. What factors influence the success or failure of a project launched on Kickstarter? 
3.How can the probability of success for a given Kickstarter campaign be assessed? 
4. How many Kickstarter campaigns will be in 2021? 

# Methods
GLM Inverse Gaussian & Binomial were used to create the models 


# Results of the IG model 

The residual plot of the IG model 

```{r, residual IG, fig.cap='Residual plot of IG model', out.width="80%"}
plot(IG$linear.predictors,residuals(IG,type="deviance"),pch=16, col = "royalblue4")
```


Confidence intervalls for the IG model shows 

```{r confidence interval, echo=FALSE, fig.cap='confidence intervalls', fig.height=6, warning=FALSE, out.width="80%"}
#trim whitespace
par(mar=c(2,2,0,0))

coef(IG)[2] + 1.96*c(-1,1)*summary(IG)$coef[2,2]

plot_summs(IG, scale = TRUE, plot.distributions = TRUE, inner_ci_level = .95)

```



## Binominal model results 

```{r warning=FALSE, include=FALSE}
bi_data <- kickstarter
bi_data$pledged <- NULL
bi_data$goal <- NULL
bi_data$pledged_log <-NULL
bi_data$id <- NULL
bi_data$goal_ratio <- NULL

binominal_baseline <- glm(target ~., data = bi_data, family = binomial)
binominal_baseline <-step(binominal_baseline,trace=FALSE)
```

```{r Binominal, echo=FALSE, out.width = "8cm", out.height= "5cm", warning=FALSE}
#,booktabs = TRUE
results <- predictLog(bi_data, binominal_baseline, t="successful", f="failed")

results$ClassPredict <- as.factor(results$ClassPredict)

confusionStats_df(results,"target")[c("Accuracy","Sensitivity","Specificity","Precision")]

knitr::kable(confusionStats_df(results,"target")[c("Accuracy","Sensitivity","Specificity","Precision")]* 100, digits = 2, format = "html", caption = "Model performance in percentage") %>%
  kable_styling(font_size = 14, full_width = T)%>%
  kable_styling(bootstrap_options = c("striped", "scale_down", "hover"))%>%
  kable_styling(fixed_thead=list(enabled = T, background = "lightskyblue"))

```

```{r residual binominal, echo=FALSE, warning=FALSE, out.width="80%"}
arm:::binnedplot(results$fit, as.numeric(results$target) - as.numeric(results$ClassPredict), col.pts = "royalblue4", col.int = "lightskyblue")
```


```{r ROC , echo=FALSE,fig.height=6, warning=FALSE, out.width="80%"}
plot.roc(results$target,results$fit, col = "royalblue4",
         main = "Binominal baseline model", print.auc = TRUE)
```

```{r confidence binominal, echo=FALSE, warning=FALSE}
coef(binominal_baseline)[2] + 1.96*c(-1,1)*summary(binominal_baseline)$coef[2,2]

plot_summs(binominal_baseline, scale = TRUE, plot.distributions = TRUE, inner_ci_level = .95)
```



# Conclusion 

We could have performed regularization with the different distributions.

Our binomial model is great at discrimination. The residual plot makes it appear not calibrated, which is true. Howevever, most predictions (109682 / 114432) are greater then 65% or less then 35%.

In the models using the best subset with all interactions with BIC produced a lot of coefficients. We tried reducing the coefficients by examing the deviances, and removing interactions that were believed to not be significant or causing too many coefficients. The reduction in features will create less variability, meaning the confidence intervals are more reliable and predictions are more precise. Nonetheless, removing important coefficients did increase the bias of the model. 

The models include backers count. It is true that this would not be known, but the models included it so that individuals starting a kickstarter campaign would need to know how many backers they would need. 

Areas of future research would include predicting the number of backers.

# References
Kickstarter. (2020, July 20). Kickstarter Stats. Retrieved from Kickstarter: https://www.kickstarter.com/help/stats 

Web Robots. (2020, July). Kickstarter Datasets. Retrieved from Web Robots: https://webrobots.io/kickstarter-datasets/ 